# DB 호출 시 전달할 대량의 데이터 전송 방식

**작성 배경:**
- DB 호출 시 전달할 대량의 데이터 전송 방식에 대해 고민하고, 실제로 적용 및 그렇게 생각한 이유를 작성

## 1. DB 호출 시 데이터 전송 하는 여러 방법
1. 개별 호출
  - 백엔드 서버에서 1건씩 INSERT/UPDATE 쿼리를 호출
  - 장점 :
    - 구현이 단순
  - 단점 :
    - 통신이 계속 일어나게 되어 이슈가 생길 수 있음
    - 
2. XML 전달 방식
  - XML 형태로 전체 데이터를 묶어 프로시저에 전달 후, DB 서버에서 OPENXML 로 파싱
  - 장점 :
    - 한 번의 호출로 묶어서 처리가 가능
  - 단점 :
    - XML 태그로 인해 데이터 크기가 커짐
    - 
3. JSON 방식
  - JSON 형태로 전체 데이터를 묶어 프로시저에 전달 후, DB 서버에서 OPENJSON 으로 파싱
  - 장점 :
    - 데이터 크기가 XML 형식일 때 보다 경량화,가독성이 좋음.
  - 단점 :
    - SQL Server 2016 이상 지원, 별도의 데이터 타입이 없어 NVARCHAR,VARCHAR 형태로 전달해야함
      
## 1.1 선택한 방식과 그 이유
- 선택한 방식 :
- 3번의 JSON 방식을 채택하였다.
- 이유 :
  - 1번의 경우 :
    소량의 데이터를 전송할 때는 유리할지라도, 수백,수천건의 데이터가 등록/수정 일어나게 되면 통신간의 부하가 생길 것을 우려
  - 2번의 경우 :
    JSON과 마찬가지로 한번의 호출로 묶어서 처리가 가능, 파싱 및 XML 데이터 타입 존재하지만
    데이터 크기가 JSON 보다 크고, 1천건 이상의 더미 데이터를 사용하여 실제로 측정했을 때,
    JSON을 통해 처리하는 속도가 XML을 사용하여 처리하는 것보다 2배 정도 더 빠른 것으로 확인

